name: Update README with .md Files

on:
  push:
    branches:
      - '**' # Trigger on any branch push
    paths:
      - '**/*.md' # Trigger only when .md files are modified or added

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v3

    - name: List all .md files and update README
      run: |
        # Find all .md files in the current branch
        MD_FILES=$(find . -name "*.md" | sort)
        
        # Generate the Markdown content
        echo "# List of .md Files" > README.md
        echo "" >> README.md
        for file in $MD_FILES; do
          echo "- [$file]($file)" >> README.md
        done

    - name: Commit and Push Changes
      env:
        GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}
      run: |
        git config --global user.name "github-actions[bot]"
        git config --global user.email "github-actions[bot]@users.noreply.github.com"
        
        git add README.md
        git commit -m "Update README.md with list of .md files"
        git push origin HEAD
